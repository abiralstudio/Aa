<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Abiral Studios</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #EEEFE0;
      color: #2a2a2a;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .header {
      background-color: #D1D8BE;
      padding: 30px 0;
      text-align: center;
      border-bottom: 4px solid #A7C1A8;
    }
    .container {
      width: 90%;
      max-width: 1100px;
      margin: 0 auto;
    }
    .center-header {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .logo {
      font-size: 3em;
      font-weight: bold;
      color: #2a2a2a;
      margin-bottom: 10px;
    }
    .nav-list {
      list-style: none;
      display: flex;
      gap: 20px;
      padding: 0;
      justify-content: center;
      flex-wrap: wrap;
    }
    .nav-list li a {
      color: #2a2a2a;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    .nav-list li a:hover {
      color: #A7C1A8;
    }
    .hero {
      background: #A7C1A8;
      padding: 80px 20px;
      text-align: center;
      color: #fff;
    }
    .hero-title {
      font-size: 3.2em;
      margin-bottom: 20px;
    }
    .hero-subtitle {
      font-size: 1.4em;
      max-width: 700px;
      margin: 0 auto;
      color: #f0f0f0;
    }
    .services-section {
      padding: 60px 0;
      background-color: #F5F5EC;
      flex-grow: 1;
    }
    .services-section h3 {
      text-align: center;
      font-size: 2.2em;
      color: #2a2a2a;
      margin-bottom: 40px;
    }
    .services {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 30px;
      margin-bottom: 60px;
    }
    .service {
      background: #D1D8BE;
      color: #2a2a2a;
      text-align: center;
      padding: 25px;
      font-size: 1.2em;
      border-radius: 10px;
      text-decoration: none;
      transition: all 0.3s ease;
      user-select: none;
    }
    .service:hover {
      background-color: #A7C1A8;
      color: white;
    }
    .audio-tracks {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 30px;
    }
    .track {
      background: #D1D8BE;
      padding: 20px 30px;
      border-radius: 10px;
      width: 320px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
    }
    .track-name {
      font-weight: 700;
      font-size: 1.2em;
      margin-bottom: 15px;
      color: #2a2a2a;
    }
    audio {
      width: 100%;
      outline: none;
      margin-bottom: 10px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-bottom: 10px;
    }
    button {
      background: #A7C1A8;
      border: none;
      border-radius: 5px;
      padding: 8px 14px;
      font-weight: 600;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #7c987a;
    }
    input[type=range] {
      cursor: pointer;
    }
    canvas.waveform {
      width: 100%;
      height: 50px;
      border-radius: 5px;
      background-color: #C3D0B5;
      margin-top: 10px;
    }
    footer.footer {
      background-color: #D1D8BE;
      color: #2a2a2a;
      text-align: center;
      padding: 30px 0;
      font-size: 0.9em;
      user-select: none;
    }

    /* Responsive */
    @media (max-width: 700px) {
      .services {
        grid-template-columns: 1fr 1fr;
      }
      .track {
        width: 100%;
      }
    }
    @media (max-width: 450px) {
      .services {
        grid-template-columns: 1fr;
      }
      .nav-list {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container center-header">
      <h1 class="logo">Abiral Studios</h1>
      <nav>
        <ul class="nav-list">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="books.html">Books</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h2 class="hero-title">Your Sound, Perfected</h2>
      <p class="hero-subtitle">Crafting professional audio with 5+ years of experience using FL Studio. Get custom beats, mixing, mastering, and vocal editing tailored to your unique style.</p>
    </div>
  </section>

  <section class="services-section container">
    <h3>Our Services</h3>
    <div class="services">
      <a href="services.html#mixing" class="service">ðŸŽ§ Mixing</a>
      <a href="services.html#mastering" class="service">ðŸŽš Mastering</a>
      <a href="services.html#vocals" class="service">ðŸŽ¤ Vocal Mixing</a>
      <a href="services.html#beats" class="service">ðŸŽµ Custom Beats</a>
    </div>

    <h3 style="text-align:center; margin-bottom: 30px; color: #2a2a2a;">Work Preview</h3>

    <div class="audio-tracks">
      <!-- Track 1 -->
      <div class="track" data-track-id="1">
        <p class="track-name">Westcoast Beat</p>
        <audio id="audio1" controls preload="metadata" src="track1.mp3"></audio>

        <div class="controls">
          <label for="volume1">Volume:</label>
          <input type="range" id="volume1" min="0" max="1" step="0.01" value="1" />
          <button id="autoplay1">Autoplay Off</button>
        </div>
        <canvas id="waveform1" class="waveform"></canvas>
      </div>

      <!-- Track 2 -->
      <div class="track" data-track-id="2">
        <p class="track-name">Sexy Drill Beat</p>
        <audio id="audio2" controls preload="metadata" src="track2.mp3"></audio>

        <div class="controls">
          <label for="volume2">Volume:</label>
          <input type="range" id="volume2" min="0" max="1" step="0.01" value="1" />
          <button id="autoplay2">Autoplay Off</button>
        </div>
        <canvas id="waveform2" class="waveform"></canvas>
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>&copy; 2025 Abiral Studios â€” Gangtok, Sikkim</p>
  </footer>

  <script>
    // Setup Audio Context & Waveform Visualization
    function setupAudioVisualization(audioElement, canvas) {
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      const source = audioCtx.createMediaElementSource(audioElement);
      source.connect(analyser);
      analyser.connect(audioCtx.destination);

      const bufferLength = analyser.frequencyBinCount;
      const dataArray = new Uint8Array(bufferLength);

      const canvasCtx = canvas.getContext('2d');
      const WIDTH = canvas.width = canvas.clientWidth * devicePixelRatio;
      const HEIGHT = canvas.height = canvas.clientHeight * devicePixelRatio;

      function draw() {
        requestAnimationFrame(draw);
        analyser.getByteFrequencyData(dataArray);

        canvasCtx.fillStyle = '#C3D0B5';
        canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);

        const barWidth = (WIDTH / bufferLength) * 1.5;
        let x = 0;

        for (let i = 0; i < bufferLength; i++) {
          const barHeight = dataArray[i] / 2;
          canvasCtx.fillStyle = '#7c987a';
          canvasCtx.fillRect(x, HEIGHT - barHeight, barWidth, barHeight);
          x += barWidth + 1;
        }
      }
      draw();

      return { audioCtx, analyser, source };
    }

    // Wait for DOM to load
    window.addEventListener('DOMContentLoaded', () => {
      // Track 1 Elements
      const audio1 = document.getElementById('audio1');
      const volume1 = document.getElementById('volume1');
      const autoplayBtn1 = document.getElementById('autoplay1');
      const canvas1 = document.getElementById('waveform1');
      let audioCtx1 = null;

      // Track 2 Elements
      const audio2 = document.getElementById('audio2');
      const volume2 = document.getElementById('volume2');
      const autoplayBtn2 = document.getElementById('autoplay2');
      const canvas2 = document.getElementById('waveform2');
      let audioCtx2 = null;

      // Volume controls
      volume1.addEventListener('input', () => {
        audio1.volume = volume1.value;
      });
      volume2.addEventListener('input', () => {
        audio2.volume = volume2.value;
      });

      // Autoplay toggles
      function toggleAutoplay(audioEl, button) {
        if (audioEl.autoplay) {
          audioEl.autoplay = false;
          button.textContent = 'Autoplay Off';
        } else {
          audioEl.autoplay = true;
          button.textContent = 'Autoplay On';
          // Play immediately if toggled on
          audioEl.play().catch(() => {});
        }
      }
      autoplayBtn1.addEventListener('click', () => toggleAutoplay(audio1, autoplayBtn1));
      autoplayBtn2.addEventListener('click', () => toggleAutoplay(audio2, autoplayBtn2));

      // Setup audio context and visualization on user interaction to allow context resume
      function initAudio() {
        if (!audioCtx1) {
          audioCtx1 = setupAudioVisualization(audio1, canvas1).audioCtx;
        }
        if (!audioCtx2) {
          audioCtx2 = setupAudioVisualization(audio2, canvas2).audioCtx;
        }
        // Remove event listener after init
        window.removeEventListener('click', initAudio);
        window.removeEventListener('keydown', initAudio);
      }

      // Chrome requires user interaction before AudioContext runs
      window.addEventListener('click', initAudio);
      window.addEventListener('keydown', initAudio);
    });
  </script>
</body>
</html>
